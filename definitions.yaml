definitions:

  # Generic response model
  V4GenericResponse:
    type: object
    properties:
      message:
        type: string
        description: A human readable message
      code:
        type: string
        description: A machine readable [response code](https://github.com/giantswarm/api-spec/blob/master/details/RESPONSE_CODES.md) like e. g. `INVALID_CREDENTIALS`

  # Request to create a new cluster
  V4AddClusterRequest:
    type: object
    required:
      - owner
    description: Request model for creating a new cluster
    properties:
      owner:
        type: string
        description: Name of the organization owning the cluster
      name:
        type: string
        description: Cluster name
      kubernetes_version:
        type: string
        description: Kubernetes version number
      workers:
        type: array
        items:
          $ref: '#/definitions/V4NodeDefinition'

  V4ModifyClusterRequest:
    type: object
    required: []
    description: Request body for cluster modification
    properties:
      name:
        type: string
        description: Name for the cluster
      owner:
        type: string
        description: Name of the organization owning the cluster
      workers:
        type: array
        description: Worker node array
        items:
          $ref: '#/definitions/V4NodeDefinition'

  # Details on existing cluster
  V4ClusterDetailsResponse:
    type: object
    description: Response model showing details of a cluster
    properties:
      id:
        type: string
        description: Unique cluster identifier
      api_endpoint:
        type: string
        description: URI of the Kubernetes API endpoint
      create_date:
        type: string
        description: Date/time of cluster creation
      owner:
        type: string
        description: Name of the organization owning the cluster
      name:
        type: string
        description: Cluster name
      kubernetes_version:
        type: string
        description: Kubernetes version number
      workers:
        type: array
        items:
          $ref: '#/definitions/V4NodeDefinition'


  # Definition of a cluster node
  V4NodeDefinition:
    type: object
    properties:
      aws:
        type: object
        description: Attributes specific to nodes running on Amazon Web Services (AWS)
        properties:
          instance_type:
            type: string
            description: EC2 instance type name. Must be the same for all worker nodes of a cluster.
      memory:
        type: object
        properties:
          size_gb:
            type: number
            description: RAM size in GB
      storage:
        type: object
        properties:
          size_gb:
            type: integer
            description: Node storage size in GB
      cpu:
        type: object
        properties:
          cores:
            type: integer
            description: Number of CPU cores
      labels:
        type: object
        additionalProperties: true

  # List of key pairs
  V4GetKeyPairsResponse:
    type: array
    description: Array of sparse key pair objects
    items:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier of the key pair
        description:
          type: string
          description: Free text information about the key pair
        ttl_hours:
          type: integer
          description: Expiration time (from creation) in hours
        create_date:
          type: string
          description: Date/time of creation
        common_name:
          type: string
          description: The common name of the certificate subject.
        certificate_organizations:
          type: string
          description: The certificate subject's `organization` fields.

  # Add key pair request
  V4AddKeyPairRequest:
    type: object
    required:
      - description
    properties:
      description:
        type: string
        description: Free text information about the key pair
      ttl_hours:
        type: integer
        format: int32
        description: Expiration time (from creation) in hours
      cn_prefix:
        type: string
        description: The common name prefix of the certificate subject.
      certificate_organizations:
        type: string
        description: This will set the certificate subject's `organization` fields. Use a comma seperated list of values.

  V4AddKeyPairResponse:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier of the key pair
      description:
        type: string
        description: Free text information about the key pair
      ttl_hours:
        type: integer
        description: Expiration time (from creation) in hours
      create_date:
        type: string
        description: Date/time of creation
      certificate_authority_data:
        type: string
        description: PEM-encoded CA certificate of the cluster
      client_key_data:
        type: string
        description: PEM-encoded RSA private key
      client_certificate_data:
        type: string
        description: PEM-encoded certificate

  # cluster metrics
  V4GetClusterMetricsResponse:
    description: Response for the getClusterMetrics operation
    type: object
    properties:
      workers:
        description: Group of metrics regarding workers
        type: array
        items:
          type: object
          properties:
            id:
              type: string
            metrics:
              type: object
              properties:
                container_count:
                  description: Number of containers running
                  $ref: '#/definitions/V4Metric'
                pod_count:
                  description: Number of pods running
                  $ref: '#/definitions/V4Metric'
                cpu_used:
                  description: Number of CPU cores currently used
                  $ref: '#/definitions/V4Metric'
                ram_free:
                  description: Free memory in bytes
                  $ref: '#/definitions/V4Metric'
                ram_available:
                  description: Memory available for new applications, in bytes
                  $ref: '#/definitions/V4Metric'
                ram_cached:
                  description: Memory used for file caches, in bytes
                  $ref: '#/definitions/V4Metric'
                ram_buffers:
                  description: Memory used for kernel buffers, in bytes
                  $ref: '#/definitions/V4Metric'
                ram_mapped:
                  description: Memory used by mapped files, in bytes
                  $ref: '#/definitions/V4Metric'
                node_storage_used:
                  description: Amount of local storage used in bytes
                  $ref: '#/definitions/V4Metric'
                network_rx:
                  description: Incoming data volume (Rx) in bytes per second
                  $ref: '#/definitions/V4Metric'
                network_tx:
                  description: Outgoing data volume (Tx) in bytes per second
                  $ref: '#/definitions/V4Metric'
                resource_cpu_requests:
                  description: Sum of CPU requeszs for containers
                  $ref: '#/definitions/V4Metric'
                resource_cpu_limits:
                  description: Sum of CPU limits for containers
                  $ref: '#/definitions/V4Metric'
                resource_ram_requests:
                  description: Sum of memory requests for containers
                  $ref: '#/definitions/V4Metric'
                resource_ram_limits:
                  description: Sum of memory limits for containers
                  $ref: '#/definitions/V4Metric'

  V4Metric:
    type: object
    properties:
      timestamp:
        description: Time when the given value has been recorded
        type: string
      value:
        description: The value for the metric. Can be an integer or float.
        type: number

  # a complete organization object
  V4Organization:
    type: object
    properties:
      id:
        type: string
        description: Unique name/identifier of the organization
      members:
        type: array
        description: List of members that belong to this organization
        items:
          $ref: '#/definitions/V4OrganizationMember'

  # An organization as returned by getOrganizations as an array item
  V4OrganizationListItem:
    type: object
    properties:
      id:
        type: string
        description: Unique name/identifier of the organization

  # A user that belongs to an organization
  V4OrganizationMember:
    type: object
    properties:
      email:
        type: string
        description: Email address of the user

  # One of the users in the array as returned by getUsers
  V4UserListItem:
    type: object
    properties:
      email:
        type: string
        description: Email address of the user
      created:
        type: string
        description: The date and time that this account was created
      expiry:
        type: string
        description: The date and time when this account will expire

  # A cluster array item, as return by getClusters
  V4ClusterListItem:
    type: object
    properties:
      id:
        type: string
        description: Unique cluster identifier
      create_date:
        type: string
        description: Date/time of cluster creation
      name:
        type: string
        description: Cluster name
      owner:
        type: string
        description: Name of the organization owning the cluster
